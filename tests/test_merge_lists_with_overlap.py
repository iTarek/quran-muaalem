import pytest

from test_sliding_window import merge_lists_with_overlap
from display_lists_diff import print_colored_diff_summary


@pytest.mark.parametrize(
    "A, B, num_ignore, exp",
    [
        # delete last num_ignore of A and concatenate B
        ([1, 2, 3, 4], [3, 5, 6, 7], 2, [1, 2, 3, 5, 6, 7]),
        ([1, 2, 3, 4, 5, 6], [3, 4, 5, 6], 0, [1, 2, 3, 4, 5, 6]),
        ([1, 2, 3, 4, 5, 6], [3, 4, 5, 6], 2, [1, 2, 3, 4, 5, 6]),
        ([1, 2], [3, 5, 6, 7], 0, [1, 2, 3, 5, 6, 7]),
        ([1, 2, 3], [3, 5, 6, 7], 0, [1, 2, 3, 5, 6, 7]),
        ([1, 2, 3, 4], [3, 5, 6, 7], 0, [1, 2, 3, 5, 6, 7]),
        ([1, 2, 3, 4, 10], [3, 5, 6, 7], 0, [1, 2, 3, 5, 6, 7]),
        (
            [
                1,
                34,
                25,
                25,
                25,
                25,
                32,
                23,
                23,
                32,
                29,
                29,
                26,
                32,
                2,
                34,
                22,
                33,
                23,
                23,
                34,
                13,
                32,
                28,
            ],
            [
                25,
                25,
                32,
                23,
                23,
                32,
                29,
                29,
                26,
                32,
                2,
                34,
                22,
                33,
                23,
                23,
                34,
                13,
                32,
                28,
                1,
                34,
                25,
                18,
                23,
                34,
            ],
            0,
            [
                1,
                34,
                25,
                25,
                25,
                25,
                32,
                23,
                23,
                32,
                29,
                29,
                26,
                32,
                2,
                34,
                22,
                33,
                23,
                23,
                34,
                13,
                32,
                28,
                1,
                34,
                25,
                18,
                23,
                34,
            ],
        ),
        (
            [
                1,
                34,
                25,
                25,
                25,
                25,
                32,
                23,
                23,
                32,
                29,
                29,
                26,
                32,
                2,
                34,
                22,
                33,
                23,
                23,
                34,
                13,
                32,
                28,
                1,
                34,
                25,
                18,
                32,
                23,
                34,
                30,
                30,
            ],
            [
                29,
                32,
                2,
                34,
                22,
                33,
                23,
                23,
                34,
                13,
                32,
                28,
                1,
                34,
                25,
                18,
                32,
                23,
                34,
                30,
                30,
                24,
            ],
            0,
            [
                1,
                34,
                25,
                25,
                25,
                25,
                32,
                23,
                23,
                32,
                29,
                29,
                26,
                32,
                2,
                34,
                22,
                33,
                23,
                23,
                34,
                13,
                32,
                28,
                1,
                34,
                25,
                18,
                32,
                23,
                34,
                30,
                30,
                24,
            ],
        ),
        (
            [
                2,
                34,
                12,
                24,
                34,
                23,
                23,
                32,
                29,
                29,
                26,
                34,
                10,
                10,
                32,
                6,
                24,
                32,
                29,
                29,
                25,
                34,
                10,
                10,
                32,
                6,
                34,
                30,
                30,
                24,
                1,
                32,
                23,
                6,
                32,
                24,
                8,
                33,
                23,
                34,
                23,
                23,
                23,
                32,
                29,
                26,
                34,
                10,
                32,
                2,
                2,
                34,
                23,
                18,
                32,
                29,
                29,
                23,
                32,
                24,
                34,
                30,
                30,
                25,
                1,
                32,
                10,
                10,
                32,
                6,
                24,
                32,
                29,
                29,
                25,
                34,
                10,
                10,
                32,
                6,
                34,
                30,
                30,
                30,
                24,
            ],
            [
                1,
                32,
                10,
                10,
                32,
                6,
                24,
                32,
                29,
                29,
                25,
                34,
                10,
                10,
                32,
                6,
                34,
                30,
                30,
                24,
            ],
            0,
            [
                2,
                34,
                12,
                24,
                34,
                23,
                23,
                32,
                29,
                29,
                26,
                34,
                10,
                10,
                32,
                6,
                24,
                32,
                29,
                29,
                25,
                34,
                10,
                10,
                32,
                6,
                34,
                30,
                30,
                24,
                1,
                32,
                23,
                6,
                32,
                24,
                8,
                33,
                23,
                34,
                23,
                23,
                23,
                32,
                29,
                26,
                34,
                10,
                32,
                2,
                2,
                34,
                23,
                18,
                32,
                29,
                29,
                23,
                32,
                24,
                34,
                30,
                30,
                25,
                1,
                32,
                10,
                10,
                32,
                6,
                24,
                32,
                29,
                29,
                25,
                34,
                10,
                10,
                32,
                6,
                34,
                30,
                30,
                24,
            ],
        ),
        (
            [
                2,
                34,
                12,
                24,
                34,
                23,
                23,
                32,
                29,
                29,
                26,
                34,
                10,
                10,
                32,
                6,
                24,
                32,
                29,
                29,
                25,
                34,
                10,
                10,
                32,
                6,
                34,
                30,
                30,
                24,
                1,
                32,
                23,
                6,
                32,
                24,
                8,
                33,
                23,
                34,
                23,
                23,
                32,
                29,
                29,
                26,
                34,
                10,
                32,
                2,
                2,
                34,
                23,
                18,
                32,
                29,
                29,
                23,
                32,
                24,
                34,
                30,
                30,
                30,
                25,
            ],
            [
                34,
                12,
                24,
                34,
                23,
                23,
                32,
                29,
                26,
                34,
                10,
                10,
                32,
                6,
                24,
                32,
                29,
                29,
                25,
                34,
                10,
                10,
                32,
                6,
                34,
                30,
                30,
                24,
                1,
                32,
                23,
                6,
                32,
                24,
                8,
                33,
                23,
                34,
                23,
                23,
                32,
                29,
                29,
                26,
                34,
                10,
                32,
                2,
                2,
                34,
                23,
                18,
                32,
                29,
                29,
                23,
                32,
                24,
                34,
                30,
                30,
                25,
                1,
                10,
            ],
            0,
            [
                2,
                34,
                12,
                24,
                34,
                23,
                23,
                32,
                29,
                29,
                26,
                34,
                10,
                10,
                32,
                6,
                24,
                32,
                29,
                29,
                25,
                34,
                10,
                10,
                32,
                6,
                34,
                30,
                30,
                24,
                1,
                32,
                23,
                6,
                32,
                24,
                8,
                33,
                23,
                34,
                23,
                23,
                32,
                29,
                29,
                26,
                34,
                10,
                32,
                2,
                2,
                34,
                23,
                18,
                32,
                29,
                29,
                23,
                32,
                24,
                34,
                30,
                30,
                25,
                1,
                10,
            ],
        ),
    ],
)
def test_merge_lists_with_overlap(A, B, num_ignore, exp):
    out = merge_lists_with_overlap(A, B)
    print(f"A: {A}\nB: {B}\nout: {out}\n exp: {exp}")
    print_colored_diff_summary(exp, out)
    assert out == exp
